---
import Layout from '../layouts/Layout.astro';
import Navigation from '../components/Navigation';
import Hero from '../components/Hero';
import TrustBar from '../components/TrustBar';
import AboutUs from '../components/AboutUs';
import ServicesGrid from '../components/ServicesGrid';
import ServiceAreas from '../components/ServiceAreas';
import Gallery from '../components/Gallery';
import FAQ from '../components/FAQ';
import ContactSection from '../components/ContactSection';
import Footer from '../components/Footer';
import ScrollDepthTracker from '../components/ScrollDepthTracker';

// FAQ Schema for SEO
const faqs = [
  {
    question: "What services does RB Joinery provide?",
    answer: "We provide professional joinery and building services including house extensions, loft conversions, garden rooms, kitchen installations, and home improvements. Our team specializes in carpentry, construction, and complete home transformations across Ayrshire and Glasgow."
  },
  {
    question: "What areas do you cover?",
    answer: "We serve Ayrshire and Glasgow areas. Contact us to confirm coverage for your specific location and discuss your project requirements."
  },
  {
    question: "Do you offer house extensions?",
    answer: "Yes, we specialize in house extensions including single storey and two storey extensions. We handle the complete process from initial design consultation through to planning permission and construction, ensuring all work meets building regulations and your specific requirements."
  },
  {
    question: "What building services do you offer?",
    answer: "Our building services include house extensions, loft conversions, garden rooms, kitchen installations, and home improvements. We handle both residential and commercial projects, ensuring all work meets high standards and local building regulations."
  },
  {
    question: "Do you provide loft conversions?",
    answer: "Yes, we specialize in loft conversions including dormer and Velux conversions. We can transform your loft space into beautiful, functional rooms such as bedrooms, home offices, or playrooms, adding significant value to your property."
  },
  {
    question: "Do you build garden rooms?",
    answer: "Absolutely! We provide comprehensive garden room construction including home offices, garden studios, garden gyms, and entertainment spaces. We work with various materials and can create bespoke solutions to meet your specific needs and budget."
  },
  {
    question: "How long does a typical project take?",
    answer: "Project duration depends on size and complexity. Simple improvements may take a few days, while larger projects like house extensions or loft conversions may take several weeks to months. We provide realistic timelines during the quote process and keep you updated throughout the project."
  },
  {
    question: "Do you offer free quotes?",
    answer: "Yes, we provide completely free, no-obligation quotes for all our services. You can request a quote by calling 07927 726622, messaging us on WhatsApp, emailing us at ryan@rbjoinery.com, or using our contact form. We'll assess your needs and provide a detailed, transparent quote with no hidden costs."
  }
];

const faqSchema = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": faqs.map(faq => ({
    "@type": "Question",
    "name": faq.question,
    "acceptedAnswer": {
      "@type": "Answer",
      "text": faq.answer
    }
  }))
};
---

<Layout>
  <!-- FAQ Schema for SEO -->
  <script type="application/ld+json" set:html={`${JSON.stringify(faqSchema)}`} />
  
  <main class="min-h-screen">
    <ScrollDepthTracker client:load />
    <Navigation client:load />
    <Hero client:load />
    <TrustBar client:load />
    <AboutUs client:load />
    <ServicesGrid client:load />
    <Gallery client:load />
    <ServiceAreas client:load />
    <FAQ client:load />
    <ContactSection client:load />
    <Footer client:load />
  </main>
  
  <script>
    // Handle hash navigation when coming from other pages
    const handleHashNavigation = () => {
      const hash = window.location.hash;
      if (hash) {
        const elementId = hash.substring(1);
        const element = document.getElementById(elementId);
        if (element) {
          setTimeout(() => {
            element.scrollIntoView({ behavior: 'smooth' });
          }, 100);
        }
      }
    };
    
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', handleHashNavigation);
    } else {
      handleHashNavigation();
    }
    
    window.addEventListener('hashchange', handleHashNavigation);
  </script>
</Layout>

